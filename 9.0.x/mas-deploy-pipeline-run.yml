---
apiVersion: tekton.dev/v1
kind: PipelineRun
metadata:
  generateName: pr-mas-deploy-test-
  namespace: default
spec:
  params:
    - name: uds-email
      value: "dev-techzone@ibm.com"
    - name: uds-firstname
      value: "TechZone"
    - name: uds-lastname
      value: "Developer"

    # install MAS Core. This task may be skipped once done successfully
    - name: mas-install-core
      value: "true"

    # install MAS Manage, depending on MAS Core
    - name: mas-install-cp4d-manage
      value: "true"
    - name: mas-cp4d-install-cognos
      value: "false"

    # install MAS IoT and Monitor, depending on MAS Core
    - name: mas-install-iot
      value: "true"
    - name: mas-install-monitor
      value: "true"

    # install MAS Predict, depending on MAS Core, Manage, IoT and Monitor
    - name: mas-install-predict
      value: "true"
    - name: cpd-platform-components
      value: "true"
    - name: cpd-install-spss
      value: "true"
    - name: cpd-wsl-projectname
      value: "maspredictproject"
    - name: cpd-wml-url
      value: "xxx"
    - name: cpd-admin-url
      value: "xxx"
    - name: cpd-admin-username
      value: "admin"
    - name: cpd-admin-password
      value: "xxx"

    # install MAS Predict, depending on MAS Core, Manage, IoT and Monitor
    - name: mas-install-aibroker
      value: "true"
    - name: artifactory_username
      value: "xxx"
    - name: artifactory_token
      value: "xxx"
    - name: watsonxai_apikey
      value: "xxx"
    - name: watsonxai_url
      value: "xxx"
    - name: watsonxai_project_id
      value: "xxx"
    - name: mas_aibroker_channel
      value: "9.0.x"

  workspaces:
    - name: ws
      volumeClaimTemplate:
        spec:
          accessModes:
            - ReadWriteMany
          resources:
            requests:
              storage: 1Gi
  timeouts:
    pipeline: "0"
    tasks: "24h"
  pipelineRef:
    name: mas-devops-deploy